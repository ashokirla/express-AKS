# Deploy to Azure Kubernetes Service
# Build and push image to Azure Container Registry; Deploy to Azure Kubernetes Service
# https://docs.microsoft.com/azure/devops/pipelines/languages/docker

trigger: none

variables:
- group: myVG
- name: status
  value: 'false'

stages:
- stage: Build
  displayName: Build stage
  jobs:  
  - job: Build
    displayName: Build
    pool:
      vmImage: 'ubuntu-latest'
    steps:
    # - task: Docker@2
    #   displayName: Build and push an image to container registry
    #   inputs:
    #     command: buildAndPush
    #     repository: $(imageRepository)
    #     dockerfile: $(dockerfilePath)
    #     containerRegistry: $(dockerRegistryServiceConnection)
    #     tags: |
    #       $(tag)
          
    # - upload: manifests
    #   artifact: manifests
    #   condition: $(status)
    
    - task: PowerShell@2
      condition: eq('true', $(foo))
      inputs:
       targetType: 'inline'
       script: |
        Write-Host "foo: $(foo) status: $(status)"

